---
title: "multifractal"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{multifractal}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Overview
This is an improved package for multifractal detrended fluctuation (MF-DFA) and surroagte analysis (IAAFT, IAAWT). It allows to enhance the robustness and reliability of classic MF-DFA via overlapping windows. It further enables to test the significance of multifractality via IAAFT surrogates. 

## Installation

```{r, eval=FALSE}
devtools::install_github("wol-fi/multifractal")

```


## Usage

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The below example illustrates a multifractal analysis of the S&P 500 stock market index (daily, 1992-2022). The example dataset comes with the package (source: Yahoo finance).

```{r, fig.height = 5, fig.width = 7}
library(multifractal)

## preparation:
# load the example dataset 'sp500' and calculate daily log-returns
p <- sp500
r <- diff(log(p$Adj.Close)) 

## multifractal analysis
# estimate the statistics
mdl <- mfdfa(r, overlap=T)

## plot the output
plot(mdl, newindow=F)
# Interpretation:
#  - upper-left: Fluctuation plot. The slopes of the lines represent the Hurst exponents
#                (one line per moment q). If the lines are parallel then the series is monofractal 
#                (e.g., classic Brownian motion), otherwise multifractal. 
#  - upper-right: Multifractal spectrum. The wider, the stronger the degree of multifractality and 
#                non-linear auto-correlation. HÃ¶lder exponents are abbreviated by $\alpha$.
#  - lower-left: generalized Hurst exponents. Would be approximately flat if monofractal.
#  - lower-right: Scaling function. Is linear if monofractal, otherwise convex. 

## Extract Persistence and Multifractal Strength
stats <- print(mdl)


## Test Significance
sig <- significance(mdl, size=10, pval=0.1)


```
